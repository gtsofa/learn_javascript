<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fetch API</title>
</head>
<body>
      <button id="getData">GET DATA FROM LOCAL</button>
        <button id="getAPI">GET DATA FROM API </button>
          <p id="result"></p>


    <!-- add a form here-->
    <form  id="postData">
        <div>
            <input type="text" name="" id="tittle">
        </div>
        <div>
            <textarea name="" id="body" cols="20" rows="5"></textarea>
        </div>
        <input type="submit" value="SEND POST">
    </form>
    



          <script>
            document.getElementById('getData').addEventListener('click', getData);
            document.getElementById('getAPI').addEventListener('click', getAPI);

            // to handle post form
            document.getElementById('postData').addEventListener('submit', postData);

    
    
            function getAPI(){
                // code to ex

                fetch('https://jsonplaceholder.typicode.com/users')
                    .then((res) => { return res.json() })
                    .then((data) => {
                        let result = `<h2> Random User Info From Jsonplaceholder API</h2>`;
                        data.forEach((user) => {
                            const { id, name, email, address: { city, street } } = user
                            result +=
                                `<div>
                                <h5> User ID: ${id} </h5>
                                    <ul class="w3-ul">
                                        <li> User Full Name : ${name}</li>
                                        <li> User Email : ${email} </li>
                                        <li> User Address : ${city}, ${street} </li>
                                    </ul>
                                </div>`;
                                    document.getElementById('result').innerHTML = result;
                                });
                            })
            }
    
            function getData(){
                
                fetch('SampleUser.json')
                    .then(function (res) {
                        return res.json();
                    })
                    .then(function (data) {
                        let result = `<h2> User Info From sampleUser.json </h2>`;
                        data.forEach((user) => {
                            const { id, name, email } = user
                            result +=
                            `<div>
                                <h5> User ID: ${id} </h5>
                                <ul class="w3-ul">
                                    <li> User Name : ${name}</li>
                                    <li> User Email: ${email} </li>
                                </ul>
                            </div>`;

                            document.getElementById('result').innerHTML = result;
                        });
                    })
            }

            // function to post data
            function postData(event){
                event.preventDefault();

                let tittle = document.getElementById('tittle').value;
                let body = document.getElementById('body').value;

                fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    headers : new Headers(),
                    body:JSON.stringify({tittle:tittle, body:body})
                }).then((res) => res.json())
                .then((data) =>  console.log(data))
                .catch((err)=>console.log(err))
            }
    
            </script> 

</body>
</html>